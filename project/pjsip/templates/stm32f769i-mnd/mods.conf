
package genconfig

configuration conf {
	@Runlevel(0) include embox.arch.system(core_freq=216000000)
	@Runlevel(0) include embox.arch.arm.cortexm3.bundle
	include third_party.bsp.stmf7cube.cube(eth_tx_packet_count=12, eth_rx_packet_count=12)
	include platform.stm32.platform_init
	include platform.stm32.platform_shutdown
	include platform.stm32.f7.stm32f769i_mnd.bsp
	@Runlevel(0) include third_party.bsp.stmf7cube.sdram(fmc_swap=true)
	//@Runlevel(0) include embox.arch.arm.armmlib.armv7m_cpu_cache

	@Runlevel(1) include embox.driver.flash.stm32f7_qspi
	@Runlevel(1) include embox.driver.flash.stm32_qspi_flash_dev(flash_cut=0x100000)
	@Runlevel(2) include embox.driver.block.partition
	include embox.fs.driver.dfs

	include embox.driver.flash.flash_cache_ram
	include embox.driver.flash.flash_fs

	@Runlevel(0) include embox.kernel.stack(stack_size=20000,alignment=4)

	/* Enable FPU */
	@Runlevel(0) include embox.arch.arm.fpu.cortex_m7_fp
	@Runlevel(0) include embox.arch.arm.fpu.fpv5(log_level="LOG_ERR")

	@Runlevel(1) include embox.driver.interrupt.cortexm_nvic
	@Runlevel(1) include embox.driver.clock.cortexm_systick
	include embox.kernel.time.jiffies(cs_name="cortexm_systick")

	@Runlevel(1) include embox.driver.serial.stm_usart_f7
	@Runlevel(1) include embox.driver.serial.stm_diag(baud_rate=115200, usartx=1)
	@Runlevel(1) include embox.driver.diag(impl="embox__driver__serial__stm_diag")

	include embox.driver.block_dev
	include embox.driver.tty.tty(rx_buff_sz=32, io_buff_sz=32)
	include embox.driver.tty.task_breaking_enable
	@Runlevel(1) include embox.driver.serial.stm_ttyS0(baud_rate=115200, usartx=1)

	@Runlevel(2) include embox.driver.net.stm32f7cube_mnd_eth

	include embox.driver.audio.stm32f769i_mnd

	include embox.kernel.task.multi
	include embox.kernel.task.resource.idesc_table(idesc_table_size=16)

	include embox.net.util.protoent(max_aliases_num=4)
	include embox.net.util.servent(max_aliases_num=4)
	include embox.net.util.hostent(max_aliases_num=4,max_addrs_num=4)

	include embox.compat.posix.proc.exec_stub
	include embox.kernel.thread.thread_cancel_disable
	include embox.kernel.timer.sys_timer(timer_quantity=4)
	include embox.kernel.sched.sched
	include embox.kernel.sched.idle_light

	@Runlevel(2) include embox.kernel.sched.strategy.priority_based

	include embox.net.skbuff(amount_skb=28)
	include embox.net.skbuff_data(amount_skb_data=28)
	include embox.net.sock_noxattr
	include embox.net.af_inet(amount_inet_sock=10)
	include embox.net.af_packet(amount_sockets=4)
	include embox.compat.posix.net.getaddrinfo(addrinfo_pool_size=8)
	@Runlevel(2) include embox.net.core(amount_interface=2)
	@Runlevel(2) include embox.net.socket
	@Runlevel(2) include embox.net.dev(netdev_quantity=2)
	@Runlevel(2) include embox.net.arp
	@Runlevel(2) include embox.net.ipv4(max_uncomplete_cnt=8)
	@Runlevel(2) include embox.net.udp
	@Runlevel(2) include embox.net.udp_sock
	@Runlevel(2) include embox.net.raw_sock
	@Runlevel(2) include embox.net.neighbour(neighbour_amount=2)
	@Runlevel(2) include embox.net.netfilter(amount_rules=0)

	include embox.kernel.lthread.lthread
	include embox.kernel.thread.core(thread_pool_size=15,thread_stack_size=12000)
	include embox.kernel.thread.signal.siginfoq(siginfo_pool_sz=1)

	/* tty requires */
	include embox.kernel.thread.mutex

	include embox.fs.driver.initfs_dvfs
	include embox.fs.driver.devfs_dvfs
	//include embox.fs.driver.devfs_stub
	include embox.fs.rootfs_dvfs(fstype="initfs")

	include embox.fs.dvfs.core(inode_pool_size=16, dentry_pool_size=16, inode_pool_size=16)
	include embox.compat.posix.file_system_dvfs
	include embox.fs.syslib.perm_stub


	@Runlevel(2) include embox.cmd.sh.tish(prompt="mnd> ")
	@Runlevel(3) include embox.init.start_script(shell_name="tish", tty_dev="ttyS0", shell_start=1, stop_on_error=true)

	include embox.cmd.net.netmanager(conf_file="/conf/network")
	include embox.cmd.net.bootpc
	include embox.cmd.net.ifconfig
	include embox.cmd.net.route
	include embox.cmd.net.arp
	include embox.cmd.net.ping

	include embox.cmd.fs.cat
	include embox.cmd.fs.cd
	include embox.cmd.fs.ls
	include embox.cmd.fs.rm
	include embox.cmd.fs.mv
	include embox.cmd.fs.mkfs
	include embox.cmd.fs.mount
	include embox.cmd.fs.umount
	include embox.cmd.fs.stat
	include embox.cmd.fs.echo
	include embox.cmd.fs.touch
	include embox.cmd.fs.mkdir
	include embox.cmd.fs.cp
	include embox.cmd.fs.conf_setup

	include embox.cmd.hw.lsblk
	include embox.cmd.hw.partition
	include embox.cmd.hw.flash_erase

	include embox.util.log
	include embox.kernel.critical
	//include embox.cmd.loop_file_logger
	//include embox.lib.loop_file_logger_lib(file_name="/conf/log.txt", record_size=128, record_quantity=16)

	include embox.cmd.play(use_local_buffer=false, frames_per_buffer=960)
	include embox.cmd.record(use_local_buffer = false)

	include embox.kernel.irq_static
	include embox.kernel.irq_stack_protection
	include embox.mem.pool_adapter

	include embox.arch.arm.libarch

	include embox.compat.libc.stdio.print(support_floating=0)
	include embox.compat.libc.stdio.file_pool(file_quantity=4)

	include embox.net.lib.dns_file

	include embox.compat.libc.math_openlibm

	include embox.mem.heap_bm
	include embox.mem.static_heap(heap_size=0x3c000)
	include embox.mem.fixed_heap(heap_size=0x1000000, heap_start=0x60000000)
	include embox.mem.bitmask(page_size=64)

	include embox.kernel.thread.thread_local_heap
	include embox.kernel.thread.thread_allocator_pool(use_thread_section=1)

	include embox.driver.audio.portaudio_lib(log_level="LOG_ERR")

	include project.pjsip.cmd.simple_pjsua_imported(use_extern_mem=true)
	//include project.pjsip.cmd.alloc_test

	include embox.compat.posix.proc.vfork_stub
	include embox.compat.posix.proc.exec_stub

	include embox.driver.gpio.stm32_gpio_f7
	include embox.cmd.hardware.pin
	include embox.cmd.testing.diag

}
